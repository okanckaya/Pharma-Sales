# Creating Different Sub Datasets:

|Dataset # |Period|Province|Month|Year|Season|BigCity|Region|StockMarket|DolarB|DolarS|CPI(Year)|CPI(Month)|Male|Male_Province|Male_Rural|Trends_Eczacıbaşı|Trends_Prostat|Med_Deg|
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
|Dataset I|-|+|+|+|+|+|+|+|+|-|+|+|+|+|+|+|+|+|
|Dataset II|-|+|+|+|+|+|+|+|+|-|+|-|+|+|+|+|+|+|
|Dataset III|-|+|+|+|+|+|+|+|-|-|+|+|+|+|+|+|+|+|
|Dataset IV|-|+|+|+|-|+|+|+|+|-|+|+|+|+|+|+|+|+|
|Dataset V|-|+|+|+|-|+|+|+|-|-|+|-|+|+|+|+|+|+|

Since the variables month, year and season are produced depending on the period variable, the variable period is removed from all data sets. At the same time, since the "Dollar B" and "Dollar S" variables showed the same correlation value with the "Quantity" variable, the "Dollar S" variable was removed from all data sets. Since the "Season", "Dollar B" and "CPI (Month)" variables are the variables that show the lowest correlations with the "Quantity" variable, sub-datasets of all three subtractions were created separately.

# Machine Learning Algorithms:

Machine Learning algorithms used in these project are:

  * Linear Regression
  * KNN
  * XGBoost
  * Light GBM
  * Random Forest
  * Support Mector Machines
  * Gauss NB
  * Decision Trees
  * Gradient Boosting

## Result for Dataset I:

|Model|Mean Absolute Error \(Train)|Mean Absolute Error \(Test)|Mean Squared Error \(Train)|Mean Squared Error \(Test)|Root Mean Squared Error \(Train)|Root Mean Squared Error \(Test)|R2 \(Train)|R2 \(Test)|Coefficient of Variance \(Train)|Coefficient of Variance \(Test)|2020-01 Prediction|2020-02 Prediction|2020-03 Prediction|2020-04 Prediction|
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
|Gradient Boosting|47\.30|117\.96|4932\.12|49004\.20|70\.22|221\.36|0\.9623|0\.7618|0\.29|0\.88|19838|19845|19303|17104|
|XGBoost|48\.66|125\.17|5238\.31|54330\.23|72\.37|233\.08|0\.96005|0\.7359|0\.307|0\.92|20370|20317|19996|17672|
|Light GBM|24\.59|134\.21|1774\.21|54599\.99|42\.12|233\.66|0\.9864|0\.7346|0\.17|0\.92|20495|20709|20390|18782|
|Random Forest|14\.42|128\.37|945\.99|56167\.64|30\.756|236\.99|0\.9927|0\.7270|0\.12|0\.94|22118|22500|21930|20379|
|KNN|108\.69|150\.91|40081\.071|82818\.57|200\.20|287\.78|0\.69418|0\.5975|0\.84|1\.14|17062|17162|17256|17332|
|Decision Trees|0\.0|169\.42|0\.0|84340\.34|0\.0|290\.41|1\.0|0\.59010|0\.0|1\.15|19107|20268|9661|18644\.0|
|Gauss NB|75\.37|168\.49|14568\.82|172938\.69|120\.70|415\.85|0\.88|0\.15|0\.50|1\.65|15421|15420\.0|10491\.0|10617\.0|
|Support Vector Machines|164\.88|194\.48|128800\.23|207938\.79|358\.88|456\.00|0\.01|-0\.01|1\.50|1\.81|11078|11464|11058|11134|
|Linear Regression|151\.97|192\.00|86209\.79|217068\.24|293\.61|465\.90|0\.34|-0\.05|1\.23|1\.854|20490|20755|20006|17618|

## Results for Dataset II:

|Model|Mean Absolute Error \(Train)|Mean Absolute Error \(Test)|Mean Squared Error \(Train)|Mean Squared Error \(Test)|Root Mean Squared Error \(Train)|Root Mean Squared Error \(Test)|R2 \(Train)|R2 \(Test)|Coefficient of Variance \(Train)|Coefficient of Variance \(Test)|2020-01 Prediction|2020-02 Prediction|2020-03 Prediction|2020-04 Prediction|
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
|Gradient Boosting|46\.30|118\.57|4726\.80|48386\.46|68\.75|219\.96|0\.9639|0\.7648|0\.28|0\.87|20451|20343|19999|17678|
|XGBoost|48\.12049362373849|123\.19739916558899|5145\.201954132506|54093\.88435785176|71\.73006311256464|232\.58092002107946|0\.9607425801304441|0\.73710303656273|0\.30164583608317613|0\.9251939342937137|0    19964\.216797
dtype: float32|0    20136\.523438
dtype: float32|0    19895\.699219
dtype: float32|0    17599\.285156
dtype: float32|
|Random Forest|14\.524320436507937|125\.24389595375723|913\.1235266369048|54267\.05334971099|30\.21793385784185|232\.95289942327608|0\.9930329510877288|0\.7362614330679593|0\.12707522519463904|0\.9266736476191374|0    21664\.62
dtype: float64|0    22117\.29
dtype: float64|0    21481\.33
dtype: float64|0    20013\.52
dtype: float64|
|Light GBM|24\.510489135263168|135\.14786234955508|1760\.2819897385245|54688\.65804291839|41\.95571462552538|233\.8560626601722|0\.9865692095711657|0\.7342124289165495|0\.17643601674828152|0\.9302663806274066|0    19958\.395737
dtype: float64|0    20138\.757356
dtype: float64|0    20064\.189997
dtype: float64|0    18033\.807548
dtype: float64|
|KNN|105\.29077380952381|149\.0534104046243|35510\.86628968254|81472\.00906358381|188\.44327074661632|285\.4330202754822|0\.7290553412104561|0\.6040450035671919|0\.7924589146033311|1\.1354366427911469|0    16220\.0
dtype: float64|0    16869\.8
dtype: float64|0    16893\.8
dtype: float64|0    17663\.2
dtype: float64|
|Decision Trees|0\.0|170\.11213872832369|0\.0|87206\.01271676301|0\.0|295\.30664184329316|1\.0|0\.5761776731535235|0\.0|1\.174713358968993|0    20097\.0
dtype: float64|0    20944\.0
dtype: float64|0    21052\.0
dtype: float64|0    19583\.0
dtype: float64|
|Gauss NB|73\.65674603174604|168\.54797687861273|14253\.38392857143|173738\.39537572255|119\.3875367388549|416\.8193797986396|0\.8912479855146423|0\.15562919692396804|0\.5020594123971237|1\.6580842566570702|0    15742\.0
dtype: float64|0    15292\.0
dtype: float64|0    11096\.0
dtype: float64|0    12352\.0
dtype: float64|
|Support Vector Machines|163\.67342316316768|193\.9787083219955|128121\.24553332556|207707\.68328388722|357\.9402820769486|455\.7495839645794|0\.02244662601193348|-0\.009461972756225512|1\.5052432825203557|1\.8129464386102543|0    11093\.396084
dtype: float64|0    11470\.755016
dtype: float64|0    11033\.446171
dtype: float64|0    11123\.800479
dtype: float64|
|Linear Regression|151\.93402141022804|192\.70368750868914|86237\.4497858443|216740\.9988649451|293\.66213543091374|465\.5545068678265|0\.3420161531262129|-0\.053364000947069945|1\.2349349285949864|1\.8519498753301689|0    20997\.342456
dtype: float64|0    20731\.954386
dtype: float64|0    20113\.40186
dtype: float64|0    17868\.79528
dtype: float64|

## Results for Dataset III:

|Model|Mean Absolute Error \(Train)|Mean Absolute Error \(Test)|Mean Squared Error \(Train)|Mean Squared Error \(Test)|Root Mean Squared Error \(Train)|Root Mean Squared Error \(Test)|R2 \(Train)|R2 \(Test)|Coefficient of Variance \(Train)|Coefficient of Variance \(Test)|2020-01 Prediction|2020-02 Prediction|2020-03 Prediction|2020-04 Prediction|
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
|Gradient Boosting|47\.08653097559689|117\.80455884807719|4963\.465745606975|48063\.34127310182|70\.45186829039366|219\.23353136119897|0\.9621292107636417|0\.7664115523714725|0\.2962706540593447|0\.8720987662736417|0    20186\.638936
dtype: float64|0    20196\.56208
dtype: float64|0    19706\.34771
dtype: float64|0    17058\.46593
dtype: float64|
|Random Forest|14\.669196428571428|122\.02383815028901|972\.0857195436508|51916\.51888023121|31\.178289233754484|227\.8519670317358|0\.9925830749538074|0\.7476850603747526|0\.1311137996463238|0\.9063824229242327|0    21406\.46
dtype: float64|0    21714\.11
dtype: float64|0    21266\.28
dtype: float64|0    19592\.65
dtype: float64|
|XGBoost|48\.255921730934276|122\.35070711767054|5237\.2033794128965|54004\.39809393664|72\.36852478400327|232\.38846377119634|0\.9600406176782358|0\.737537940939295|0\.3043307536244579|0\.9244283540604226|0    20163\.664062
dtype: float32|0    20181\.763672
dtype: float32|0    19760\.306641
dtype: float32|0    17155\.007812
dtype: float32|
|Light GBM|24\.96654077131219|136\.65385723829982|1853\.9168339026658|55288\.09876715579|43\.05713452963011|235\.13421436948684|0\.9858547842824129|0\.7312991394008599|0\.1810678086837068|0\.9353507968746976|0    19482\.456041
dtype: float64|0    19846\.166822
dtype: float64|0    18787\.742281
dtype: float64|0    16989\.205246
dtype: float64|
|KNN|107\.95555555555555|149\.3643930635838|39652\.07908730159|76778\.9090867052|199\.12829805756286|277\.09007395918246|0\.69745826669043|0\.6268535289240851|0\.837392570826721|1\.10224886743417|0    17536\.0
dtype: float64|0    17339\.6
dtype: float64|0    16776\.8
dtype: float64|0    15843\.6
dtype: float64|
|Decision Trees|0\.0|163\.72254335260115|0\.0|77012\.85780346821|0\.0|277\.5119056967975|1\.0|0\.6257165351961035|0\.0|1\.1039268905707997|0    20763\.0
dtype: float64|0    21042\.0
dtype: float64|0    22520\.0
dtype: float64|0    21345\.0
dtype: float64|
|Gauss NB|73\.36458333333333|169\.35953757225434|14003\.706845238095|173117\.55606936416|118\.33725890537644|416\.07397908228313|0\.8931529988026728|0\.15864648381992064|0\.49764268778471016|1\.6551190941608143|0    15678\.0
dtype: float64|0    15639\.0
dtype: float64|0    10553\.0
dtype: float64|0    10560\.0
dtype: float64|
|Support Vector Machines|164\.41459860031628|192\.893141280971|128601\.37273625811|207221\.75341762276|358\.6103355123192|455\.2161611999543|0\.01878329940894563|-0\.007100347448652844|1\.508061052642983|1\.810824512588977|0    11042\.784115
dtype: float64|0    11443\.177684
dtype: float64|0    11018\.463865
dtype: float64|0    11124\.530638
dtype: float64|
|Linear Regression|152\.0785828638987|197\.58639399900966|86285\.68061488737|221231\.30313061274|293\.7442435434052|470\.35231808784863|0\.3416481563161208|-0\.07518693657772402|1\.2352802171555561|1\.87103530090269|0    21608\.719102
dtype: float64|0    21039\.732242
dtype: float64|0    20657\.770563
dtype: float64|0    18565\.263133
dtype: float64|

## Results for Dataset IV:

|Model|Mean Absolute Error \(Train)|Mean Absolute Error \(Test)|Mean Squared Error \(Train)|Mean Squared Error \(Test)|Root Mean Squared Error \(Train)|Root Mean Squared Error \(Test)|R2 \(Train)|R2 \(Test)|Coefficient of Variance \(Train)|Coefficient of Variance \(Test)|2020-01 Prediction|2020-02 Prediction|2020-03 Prediction|2020-04 Prediction|
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
|Gradient Boosting|47\.307820699922374|119\.4565636032037|4932\.12522662919|48966\.697248473196|70\.22909102807176|221\.28420017812658|0\.9623683360542344|0\.7620212308841678|0\.295333810696361|0\.8802562125099656|0    20127\.41095
dtype: float64|0    19544\.305547
dtype: float64|0    19816\.333767
dtype: float64|0    19113\.31582
dtype: float64|
|Light GBM|24\.771364303356375|132\.6838843635874|1821\.473122984089|54072\.72829392397|42\.678719790828886|232\.5354344910125|0\.9861023268265174|0\.7372058553015011|0\.17947646433910805|0\.925012995390762|0    20409\.697399
dtype: float64|0    19445\.179587
dtype: float64|0    19923\.031441
dtype: float64|0    18701\.959166
dtype: float64|
|XGBoost|48\.66967881855274|125\.17990720396097|5238\.314477991906|54330\.23175224312|72\.37620104697335|233\.08846336153817|0\.9600321400977985|0\.7359543852310794|0\.3043630345490957|0\.9272129134083418|0    20045\.380859
dtype: float32|0    19418\.205078
dtype: float32|0    19695\.447266
dtype: float32|0    19036\.605469
dtype: float32|
|Random Forest|14\.648730158730157|126\.55632369942197|990\.6006667658729|56975\.8276483237|31\.473809219188468|238\.69609893821828|0\.9924418076015353|0\.7230967556520949|0\.13235654737603975|0\.9495197751268518|0    20542\.13
dtype: float64|0    19618\.23
dtype: float64|0    19688\.36
dtype: float64|0    18756\.57
dtype: float64|
|KNN|105\.18482142857144|150\.0534104046243|36517\.10470238096|84894\.96707514451|191\.09449155425952|291\.36740908197766|0\.7213778342421534|0\.5874093842565229|0\.8036080713510066|1\.1590433106425446|0    20050\.4
dtype: float64|0    18272\.8
dtype: float64|0    19368\.8
dtype: float64|0    18831\.2
dtype: float64|
|Decision Trees|0\.0|167\.557225433526|0\.0|85824\.27167630057|0\.0|292\.957798456195|1\.0|0\.582892952119093|0\.0|1\.1653697909146912|0    20325\.0
dtype: float64|0    19232\.0
dtype: float64|0    19913\.0
dtype: float64|0    18222\.0
dtype: float64|
|Gauss NB|70\.46577380952381|167\.86589595375722|13445\.08382936508|173758\.42312138728|115\.95293799367518|416\.8434035958675|0\.8974152412721469|0\.15553186182625311|0\.4876159229431392|1\.6581798219832025|0    26297\.0
dtype: float64|0    24218\.0
dtype: float64|0    24541\.0
dtype: float64|0    19542\.0
dtype: float64|
|Support Vector Machines|163\.7568539392356|194\.00380089616831|128004\.98069353242|207518\.89592524935|357\.77783706307525|455\.542419457562|0\.023333716095571555|-0\.00854446380100038|1\.5045601538585214|1\.8121223497500154|0    11213\.244719
dtype: float64|0    10899\.618595
dtype: float64|0    10936\.809623
dtype: float64|0    10874\.075382
dtype: float64|
|Linear Regression|151\.97727492873304|192\.10454617343518|86210\.40774852243|217042\.45313945194|293\.61608904915687|465\.8781526745507|0\.3422224813952949|-0\.054829072541092705|1\.2347412901298724|1\.8532373203072277|0    19881\.019825
dtype: float64|0    18913\.783824
dtype: float64|0    19332\.042313
dtype: float64|0    19452\.767987
dtype: float64|

## Results for Dataset V:

|Model|Mean Absolute Error \(Train)|Mean Absolute Error \(Test)|Mean Squared Error \(Train)|Mean Squared Error \(Test)|Root Mean Squared Error \(Train)|Root Mean Squared Error \(Test)|R2 \(Train)|R2 \(Test)|Coefficient of Variance \(Train)|Coefficient of Variance \(Test)|2020-01 Prediction|2020-02 Prediction|2020-03 Prediction|2020-04 Prediction|
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
|Gradient Boosting|47\.223353567912476|117\.84328319266612|5014\.587037027312|48290\.662827406246|70\.81374892651364|219\.75136592841977|0\.9617391599902312|0\.7653067667370166|0\.29779246767985446|0\.8741586833146305|0    19678\.701432
dtype: float64|0    19778\.02974
dtype: float64|0    19023\.08866
dtype: float64|0    16461\.553043
dtype: float64|
|Random Forest|14\.357137896825396|122\.25026589595375|885\.890487549603|51756\.68005387283|29\.763912504064432|227\.50094517138348|0\.9932407366827948|0\.748461879096274|0\.12516593298274056|0\.9049860775319578|0    21340\.13
dtype: float64|0    21717\.46
dtype: float64|0    21259\.58
dtype: float64|0    19667\.35
dtype: float64|
|XGBoost|47\.59531796791605|120\.58441685307233|5012\.72149479309|53421\.445477580346|70\.8005755258606|231\.13079733687664|0\.9617533939066889|0\.740371098041751|0\.29773706968797187|0\.9194254270950811|0    20546\.765625
dtype: float32|0    20557\.822266
dtype: float32|0    20023\.5
dtype: float32|0    17661\.660156
dtype: float32|
|Light GBM|24\.96373612866587|131\.78137592479987|1817\.779494401984|53660\.92878061722|42\.63542534562056|231\.64828680699804|0\.9861305088744492|0\.7392072061543461|0\.1792943985698067|0\.9214839713590465|0    19755\.060539
dtype: float64|0    19282\.179043
dtype: float64|0    19438\.060242
dtype: float64|0    17110\.592794
dtype: float64|
|KNN|97\.18630952380951|146\.53202312138728|29228\.712777777775|76589\.99209248554|170\.96406867461295|276\.748969451533|0\.77698759737851|0\.6277716679098804|0\.7189537719297193|1\.1008919727180904|0    16891\.4
dtype: float64|0    17785\.2
dtype: float64|0    16830\.0
dtype: float64|0    16656\.8
dtype: float64|
|Decision Trees|0\.0|167\.55260115606936|0\.0|84785\.32138728324|0\.0|291\.1791911989647|1\.0|0\.587942263688919|0\.0|1\.1582945903963893|0    21953\.0
dtype: float64|0    21438\.0
dtype: float64|0    22034\.0
dtype: float64|0    20369\.0
dtype: float64|
|Gauss NB|67\.82440476190476|168\.4|12642\.949404761905|172542\.63352601157|112\.44087070439247|415\.3825147090469|0\.9035354534968935|0\.1614406146658245|0\.47284665566682915|1\.6523684874307336|0    14467\.0
dtype: float64|0    14877\.0
dtype: float64|0    11283\.0
dtype: float64|0    12002\.0
dtype: float64|
|Support Vector Machines|161\.69852964504642|192\.04306338761762|126684\.17168882504|206029\.2440684014|355\.9271999845264|453\.9044437636642|0\.03341136788213395|-0\.0013047369003904574|1\.4967776851888737|1\.8056065737509461|0    11321\.522028
dtype: float64|0    11724\.623896
dtype: float64|0    11238\.632523
dtype: float64|0    11013\.464542
dtype: float64|
|Linear Regression|152\.07394497863706|196\.60999291642298|86291\.23946057273|221149\.15789286827|293\.7537054414339|470\.26498688810364|0\.3416057428324508|-0\.07478770968137138|1\.2353200071964112|1\.870687902258505|0    21575\.487175
dtype: float64|0    21018\.214316
dtype: float64|0    20781\.854682
dtype: float64|0    18209\.133973
dtype: float64|

As it can be seen that Random Forest and *Dataset 5*  give the best results. 

***MOVING AVERAGES***

Since the results obtained in the previous analyzes were not satisfactory, it was necessary to consider of adding new parameters to the dataset. In this section, three additional columns have been added to the main data set in order to better model the upward trend in sales data: Sales data of the previous month, sales data of three months ago, average sales quantity of the last three months.

Since the XGBOOST algorithm performs well in general and can work with missing data, it has been chosen in this section.

